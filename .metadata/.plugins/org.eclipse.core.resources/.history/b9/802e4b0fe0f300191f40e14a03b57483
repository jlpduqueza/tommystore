$(function() {
   $message = $('.customMessage');
   $message.hide();
   
	 $('.login-form').on('click', 'button[type=submit]', function(e) {
	  var contextPath = $(document.body).attr("data-context-path");
	   
      e.preventDefault();
      
      $('input').next().remove();
      
      $.post({
         url : contextPath+'/ajax/loggingInTest',
         data : $('form[name=loginForm]').serialize(),
         success : function(res) {
         
            if(res.validated){
            	window.location.href = res.location;
            
            }else{
	              $.each(res.errorMessages,function(key,value){
	            	  $('input[name='+key+']').after('<span class="text-danger">'+value+'</span>');
	              });
	          	  $message.attr("class", "alert alert-danger customMessage").show().html(res.customMessage);
            }
         }
      })
   });
});
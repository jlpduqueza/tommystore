$(function() {

	var contextPath = $(document.body).attr("data-context-path");
	
	$('.deleteSuccessMessage').hide();
	$('.deleteFailedMessage').hide();
	
		$('#productTable').on('click', '.delete-link', function(e) {

	    e.preventDefault(); 
	    
		var $id = $(this).attr("id");
		var $row = "#tr"+$id;

			 $.get({
				url : contextPath+'/ajax/delete-product?id='+$id,
				success : function(res) {

			          if(!res.validated){
			        	  $('#errorMessage').html(res.customMessage);
//		            	 window.location.href = contextPath+"/admin"+res.location;
			          }
					
		        	 $($row).remove();
				}
				, error:function(error){

					$('.deleteFailedMessage').show();
					console.log(error);
				}
			
			});
   });

    
});
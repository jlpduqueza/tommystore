$(function() {

    var contextPath = $(document.body).attr("data-context-path");

    $message = $('.customMessage');
    $message.hide();

    $('#productTable').on('click', '.delete-link', function(e) {

        e.preventDefault();

        $message = $('.customMessage');
        $message.hide();

        var $id = $(this).attr("id");
        var $row = "#tr" + $id;

        $.get({
            url: contextPath + '/ajax/delete-product?id=' + $id,
            success: function(res) {

                if (!res.validated) {
                    $('#errorMessage').html(res.customMessage);
                    $message.attr("class", "alert alert-danger customMessage").show().html(res.customMessage);
                } else {
                    $($row).remove();
                    $message.attr("class", "alert alert-success customMessage").show().html(res.customMessage);
                }
            },
            error: function(error) {

                console.log(error);
                alert("There's a problem deleting a product.");
            }

        });
    });


});